"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1673],{51673:function(a,b,c){var d=c(47568),e=c(26042),f=c(69396),g=c(99534),h=c(34051),i=c.n(h),j=c(67294),k=c(56064),l="Something went wrong!",m="sms_email",n=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},b=a.isBestDeal;(0,g.Z)(a,["isBestDeal"]);var h=(0,j.useState)(null),n=h[0],o=h[1],p=(0,j.useState)(!1),q=p[0],r=p[1],s=(0,j.useState)(null),t=s[0],u=s[1],v=(0,j.useState)(null),w=v[0],x=v[1],y=(0,j.useState)({isOpen:!1,parameters:null}),z=y[0],A=y[1],B=(0,j.useState)(null),C=B[0],D=B[1],E=(0,j.useState)({error:!1,message:l,isShow:!1}),F=E[0],G=E[1],H=(0,k.v9)(function(a){var b,c;return null==a?void 0:null===(b=a.user)|| void 0===b?void 0:null===(c=b.data)|| void 0===c?void 0:c.data}),I=function(){},J=function(){A(function(a){return{isOpen:!1,parameters:null}})};if(void 0===b?0:b){var K,L,M=c(12012).T,N=(null==H?void 0:H.full_name)||"",O=(null==H?void 0:H.mobile)||"",P=(null==H?void 0:H.sdid)||"",Q=Boolean(P&&O)?1:0,R=!1;I=(L=(0,d.Z)(i().mark(function a(b){var c,d,h,j,k,n,p,q,s,t,v,w,y,B,C,E,F,H,I,J,K,L,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=void 0===(c=b.toastRef)?null:c,h=b.ver_code,j=void 0===h?"":h,k=b.casetype,n=void 0===k?m:k,p=b.resendOtp,q=void 0!==p&&p,s=b.calledFrom,t=void 0===s?"":s,v=b.mobile,w=void 0===v?"":v,y=b.name,B=void 0===y?"":y,C=b.callbackfunc,E=void 0===C?null:C,F=b.leadtype,H=void 0===F?"bestdeal":F,I=b.pagename,J=void 0===I?"":I,K=b.position,L=void 0===K?"":K,S=b.calltype,T=void 0===S?"":S,U=(0,g.Z)(b,["toastRef","ver_code","casetype","resendOtp","calledFrom","mobile","name","callbackfunc","leadtype","pagename","position","calltype"]),(V={leadtype:H,pagename:J,position:L,calltype:T}).leadtype||(O&&P?V.leadtype="".concat(H,"_submit"):V.leadtype="".concat(H,"_click")),console.log(V),(null==V?void 0:V.position)||(V.position="".concat((null==U?void 0:U.page)||""),V.pagename="".concat((null==U?void 0:U.page)||"")),N=B||N,O=w||O,W=null,X="",x(t),!q){a.next=24;break}return $={},($=(null==z?void 0:z.parameters)?null==z?void 0:z.parameters:U).ver_code="",$.casetype=m,N=null==z?void 0:null===(Y=z.parameters)|| void 0===Y?void 0:Y.name,O=null==z?void 0:null===(Z=z.parameters)|| void 0===Z?void 0:Z.mobile,a.next=20,M((0,f.Z)((0,e.Z)({},$),{calledFrom:t,mobile:O,name:N,is_verified:Q,resendOtp:!0}));case 20:W=a.sent,X={error:!1,isShow:!0,message:"OTP Resent Successfully"},a.next=41;break;case 24:if(Q){a.next=37;break}return ab={},ab=(null==z?void 0:z.parameters)?null==z?void 0:z.parameters:U,j?(ab.ver_code=j,ab.casetype=n,N=null==z?void 0:null===(ac=z.parameters)|| void 0===ac?void 0:ac.name,O=null==z?void 0:null===(ad=z.parameters)|| void 0===ad?void 0:ad.mobile,X={error:!1,isShow:!0,message:"OTP Verifying..."}):X={error:!1,isShow:!0,message:"OTP Sent to ".concat(O," Successfully")},(null==z?void 0:z.isOpen)&&r(!0),a.next=32,M((0,f.Z)((0,e.Z)({},ab),{calledFrom:t,mobile:O,name:N,is_verified:Q}));case 32:W=a.sent,(null==z?void 0:z.isOpen)||(null==W?void 0:null===(_=W.data)|| void 0===_?void 0:_.statuscode)!=6||(R=!0,A(function(a){return(0,f.Z)((0,e.Z)({},a),{isOpen:!0,parameters:(0,e.Z)((0,f.Z)((0,e.Z)({},U),{calledFrom:t,mobile:O,name:N,is_verified:Q}),V)})})),(null==W?void 0:null===(aa=W.data)|| void 0===aa?void 0:aa.statuscode)!=1&&(X=""),a.next=41;break;case 37:return r(!0),a.next=40,M((0,e.Z)((0,f.Z)((0,e.Z)({},U),{calledFrom:t,mobile:O,name:N,is_verified:Q}),V));case 40:W=a.sent;case 41:if(r(!1),o(W),(null==W?void 0:W.error)!= !0){a.next=51;break}if(!0!=R){a.next=48;break}return a.abrupt("return",!0);case 48:"undefined"!=typeof document&&document.querySelector("body").classList.remove("no_scroll"),E&&E(),u(!0),ag=X||{error:!0,isShow:!0,message:(null==W?void 0:null===(ae=W.data)|| void 0===ae?void 0:ae.message)||l},(ah=(null==z?void 0:z.parameters)?null==z?void 0:null===(af=z.parameters)|| void 0===af?void 0:af.toastRef:d)?null==d||null===(ai=d.current)|| void 0===ai||ai.show(null==ag?void 0:ag.message,null,null,{showSuccessIcon:!(null==ag?void 0:ag.error)}):alert(null==ag?void 0:ag.message),G(function(a){return ag});case 49:a.next=52;break;case 51:(null==z?void 0:z.isOpen)&&A(function(a){return(0,f.Z)((0,e.Z)({},a),{isOpen:!1})}),D(!0),setTimeout(function(){D(!1),E&&E(),"undefined"!=typeof document&&document.querySelector("body").classList.remove("no_scroll"),1!=Q&&window.location.reload()},4e3);case 52:case"end":return a.stop()}},a)})),function(a){return L.apply(this,arguments)})}var S={bdSubmitHookData:n,bdSubmitHookLoading:q,bdSubmitHookError:t,bdSubmitHookReference:w,bdSubmitHookAskVerifyPopup:z,bdSubmitHookOnSubmit:I,bdSubmitHookbdSuccessErrorPopup:C,bdSubmitHookbdToast:F,bdSubmitHookOnCloseVerifyPop:J};return(0,e.Z)({},S)};b.Z=n},12012:function(a,b,c){c.d(b,{T:function(){return n}});var d,e=c(47568),f=c(26042),g=c(69396),h=c(82222),i=c(34051),j=c.n(i),k=c(9669),l=c.n(k),m=c(90091),n=(d=(0,e.Z)(j().mark(function a(b){var d,e,i,k,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=void 0===(d=b.magicname)?"":d,i=b.barea,k=void 0===i?"":i,n=b.city,o=b.ncatid,p=b.area,q=b.catname,r=b.lat,s=b.long,t=b.docid,u=b.name,v=b.mobile,w=b.email,x=b.bd,y=void 0===x?"1":x,z=b.nearme,A=b.paidstatus,B=b.ver_code,C=void 0===B?"":B,D=b.casetype,E=void 0===D?"sms_email":D,F=b.resendOtp,G=void 0!==F&&F,H=b.from,I=void 0===H?"":H,J=b.page,K=void 0===J?"":J,L=b.calledFrom,M=void 0===L?"":L,N=b.frmpg,O=void 0===N?"":N,P=b.bd_text,Q=void 0===P?"":P,R=b.bname,S=void 0===R?"":R,T=b.li,U=void 0===T?"":T,V=b.is_verified,W=void 0===V?"":V,X=b.pageName,Y=void 0===X?"":X,Z=b.position,$=void 0===Z?"":Z,_=b.verified,aa=void 0===_?"":_,ab=b.pincode,ac=void 0===ab?"":ab,ad=b.pos,ae=void 0===ad?"":ad,af=b.leadtype,ag=void 0===af?"bestdeal":af,ah=b.pagename,ai=void 0===ah?"":ah,aj=b.calltype,al={city:n,ncatid:o,area:p,catname:q,lat:r,long:s,docid:t,name:u,mobile:v,email:w,is_verified:W,nearme:z,paidstatus:A,barea:k,magicname:e,from:I,page:K,calledFrom:M,frmpg:O,leadtype:ag,pagename:ai,position:$,calltype:ak=void 0===aj?"":aj},O=al.frmpg?null==al?void 0:al.frmpg:Y,(null==v?void 0:v.length)>0&&(al=(0,g.Z)((0,f.Z)({},al),{mobile:v})),(null==u?void 0:u.length)>0&&(al=(0,g.Z)((0,f.Z)({},al),{name:u})),am={data:{},error:!1},a.prev=6,ao=(0,f.Z)({},al),(void 0!==(null==ao?void 0:ao.callbackFunc)||null!=(0,h.Z)(null==ao?void 0:ao.callbackFunc))&&delete ao.callbackFunc,(void 0!==(null==ao?void 0:ao.calledFrom)||null!=(0,h.Z)(null==ao?void 0:ao.calledFrom))&&delete ao.calledFrom,(void 0!==(null==ao?void 0:ao.showLoader)||null!=(0,h.Z)(null==ao?void 0:ao.showLoader))&&delete ao.showLoader,(void 0!==(null==ao?void 0:ao.onClose)||null!=(0,h.Z)(null==ao?void 0:ao.onClose))&&delete ao.onClose,ap=Y,a.next=16,l().post("/api/submitBestDetal",(0,g.Z)((0,f.Z)({},ao),{ver_code:C,casetype:E,bd:y,frmpg:O,resendOtp:G}),{headers:{"Content-Type":"application/json"}});case 16:return aq=a.sent,a.next=19,aq.data;case 19:return ar=a.sent,clearTimeout(window.bestDealAutoPopupTimeOut),(null==ar?void 0:null===(an=ar.results)|| void 0===an?void 0:an.statuscode)==1?((0,m.a5)({li:U,ll:"home"==ap?"hmpge":ap||"",navigation:"0",lpageval:"home"==ap?"hmpge":ap||"",category_name:(null==ao?void 0:ao.catname)?decodeURIComponent(null==ao?void 0:ao.catname):"",contracts:[],search_id:"",ncatid:(null==ao?void 0:ao.ncatid)||"",area:(null==ao?void 0:ao.area)||"",pincode:ac||"",position_no:"",leadtype:"bd_submit",pagename:"details"==Y||"details_sticky"==Y?"dtlpg":ai,position:$||ae,calltype:""}),as=(null==(as=sessionStorage.getItem("bdsubmitted"))?void 0:as.length)>0?as.concat(",".concat(o)):o,"dtpg"==Y&&(as=(null==as?void 0:as.length)>0?as.concat(",".concat(null==al?void 0:al.docid)):null==al?void 0:al.docid),sessionStorage.setItem("bdsubmitted",as),at=c(85313).j,"dtlpg"==ap||("rsltpge"==ap?(at({bdtext:Q,bdpage:ap,ncatid:o,bname:S,verified:aa,paidStatus:A,docid:t,position:$,type:"Submit"}),void 0!==window.dataLayer&&"function"==typeof(null==dataLayer?void 0:dataLayer.push)&&dataLayer.push({event:"form_interaction",page_type:"rsltpge",form_name:"Best Deal final",form_step_name:"",form_step_number:(null==al?void 0:al.from)&&"popup"==al.from?"2":"",form_option:(null==al?void 0:al.catname)?decodeURIComponent(null==al?void 0:al.catname):"",time_stamp:Date.now()})):console.info("**Note: Datalayer not added best detal**")),am.data=null==ar?void 0:ar.results,am.error=!1):(am.data=null==ar?void 0:ar.results,am.error=!0),a.abrupt("return",am);case 25:return a.prev=25,a.t0=a.catch(6),console.log("api fetching error",a.t0),a.abrupt("return",am);case 29:case"end":return a.stop()}},a,null,[[6,25]])})),function(a){return d.apply(this,arguments)})}}])